<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login â€” Gleb Gorbatiuc</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="loaded">

<nav class="site-nav">
  <div class="nav-inner">
    <a href="index.html" class="nav-logo">GG</a>
    <button class="hamburger" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="projects.html">Projects</a></li>
      <li><a href="contacts.html">Contacts</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </div>
</nav>

<div class="page-hero">
  <h1>Login</h1>
  <p>Sign in to access the Contacts dashboard</p>
</div>

<div style="max-width:420px;margin:40px auto;padding:0 24px;">
  <div class="contact-form-card" style="position:relative;">
    <div id="loginMsg" style="display:none;padding:12px 16px;border-radius:10px;margin-bottom:16px;font-size:13px;font-weight:500;"></div>

    <div id="loginForm">
      <h3 style="margin-bottom:8px;">Sign In</h3>
      <p style="font-size:13px;color:var(--text-secondary);margin-bottom:20px;">Enter your email and password</p>
      <div class="form-group">
        <label for="loginEmail">Email</label>
        <input type="email" id="loginEmail" placeholder="your@email.com" required>
      </div>
      <div class="form-group">
        <label for="loginPass">Password</label>
        <input type="password" id="loginPass" placeholder="Your password" required>
      </div>
      <button type="button" class="form-submit" id="loginBtn" onclick="handleLogin()">Sign In</button>
      <p style="text-align:center;margin-top:14px;font-size:12px;color:var(--text-secondary);">
        Don't have an account? <a href="#" onclick="showSignup()" style="color:var(--accent);font-weight:600;text-decoration:none;">Sign Up</a>
      </p>
    </div>

    <div id="signupForm" style="display:none;">
      <h3 style="margin-bottom:8px;">Create Account</h3>
      <p style="font-size:13px;color:var(--text-secondary);margin-bottom:20px;">Sign up to access the Contacts dashboard</p>
      <div class="form-group">
        <label for="signupEmail">Email</label>
        <input type="email" id="signupEmail" placeholder="your@email.com" required>
      </div>
      <div class="form-group">
        <label for="signupPass">Password</label>
        <input type="password" id="signupPass" placeholder="Create a password (min 6 chars)" required>
      </div>
      <button type="button" class="form-submit" id="signupBtn" onclick="handleSignup()">Create Account</button>
      <p style="text-align:center;margin-top:14px;font-size:12px;color:var(--text-secondary);">
        Already have an account? <a href="#" onclick="showLogin()" style="color:var(--accent);font-weight:600;text-decoration:none;">Sign In</a>
      </p>
    </div>
  </div>
</div>

<div class="footer">
  <p>&copy; 2026 <span>Gleb Gorbatiuc</span></p>
  <p class="footer-sub">Moldova &middot; Washington &middot; North Dakota &middot; Minnesota</p>
</div>

<script>
var SUPABASE_URL = 'https://sejvaqegzwtaectjatkt.supabase.co';
var SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNlanZhcWVnend0YWVjdGphdGt0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0NDM3MzksImV4cCI6MjA4NzAxOTczOX0.ZW-Ve9CtUZDSA_SO3GfoDoJb_r3F_albouBdiakLVD8';
var sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

function showMsg(text, isError) {
  var el = document.getElementById('loginMsg');
  el.style.display = 'block';
  el.textContent = text;
  el.style.background = isError ? '#fef2f2' : '#f0fdf4';
  el.style.color = isError ? '#dc2626' : '#16a34a';
  el.style.border = '1px solid ' + (isError ? '#fecaca' : '#bbf7d0');
}

function showSignup() {
  document.getElementById('loginForm').style.display = 'none';
  document.getElementById('signupForm').style.display = 'block';
  document.getElementById('loginMsg').style.display = 'none';
}

function showLogin() {
  document.getElementById('loginForm').style.display = 'block';
  document.getElementById('signupForm').style.display = 'none';
  document.getElementById('loginMsg').style.display = 'none';
}

async function handleLogin() {
  var email = document.getElementById('loginEmail').value;
  var pass = document.getElementById('loginPass').value;
  if (!email || !pass) { showMsg('Please fill in all fields.', true); return; }

  document.getElementById('loginBtn').textContent = 'Signing in...';
  var { data, error } = await sb.auth.signInWithPassword({ email: email, password: pass });

  if (error) {
    showMsg(error.message, true);
    document.getElementById('loginBtn').textContent = 'Sign In';
  } else {
    showMsg('Success! Redirecting...', false);
    setTimeout(function() { window.location.href = 'contacts.html'; }, 800);
  }
}

async function handleSignup() {
  var email = document.getElementById('signupEmail').value;
  var pass = document.getElementById('signupPass').value;
  if (!email || !pass) { showMsg('Please fill in all fields.', true); return; }
  if (pass.length < 6) { showMsg('Password must be at least 6 characters.', true); return; }

  document.getElementById('signupBtn').textContent = 'Creating account...';
  var { data, error } = await sb.auth.signUp({ email: email, password: pass });

  if (error) {
    showMsg(error.message, true);
    document.getElementById('signupBtn').textContent = 'Create Account';
  } else {
    showMsg('Account created! You can now sign in.', false);
    setTimeout(showLogin, 1500);
  }
}

// If already logged in, redirect to contacts
sb.auth.getSession().then(function(result) {
  if (result.data.session) {
    window.location.href = 'contacts.html';
  }
});
</script>
</body>
</html>
